import asyncio  # –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è (—â–æ–± –±–æ—Ç –Ω–µ "–∑–∞–≤–∏—Å–∞–≤")
import os  # –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é (–≤—ñ–∑—å–º–µ–º–æ —Ç–æ–∫–µ–Ω –∑–≤—ñ–¥—Å–∏)
from aiogram import Bot, Dispatcher, types  # –û—Å–Ω–æ–≤–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –±–æ—Ç–∞
from aiogram.filters import Command  # –§—ñ–ª—å—Ç—Ä –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, /start)

# –û—Ç—Ä–∏–º—É—î–º–æ —Ç–æ–∫–µ–Ω, —è–∫–∏–π –º–∏ –ø—ñ–∑–Ω—ñ—à–µ –≤–∫–∞–∂–µ–º–æ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö Render (—Ü–µ –±–µ–∑–ø–µ—á–Ω—ñ—à–µ, –Ω—ñ–∂ –ø–∏—Å–∞—Ç–∏ –π–æ–≥–æ –≤ –∫–æ–¥—ñ)
API_TOKEN = os.getenv('BOT_TOKEN')

# –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –±–æ—Ç–∞ ‚Äî —Ü–µ –Ω–∞—à "–∑–≤'—è–∑–∫–æ–≤–∏–π" –∑ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Telegram
bot = Bot(token=API_TOKEN)

# –î–∏—Å–ø–µ—Ç—á–µ—Ä ‚Äî —Ü–µ "–º–æ–∑–æ–∫" –±–æ—Ç–∞, —è–∫–∏–π –≤–∏—Ä—ñ—à—É—î, —è–∫—É —Ñ—É–Ω–∫—Ü—ñ—é –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –Ω–∞ —è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
dp = Dispatcher()

# –û–±—Ä–æ–±–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏ /start
@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    # –°—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
    # ReplyKeyboardMarkup ‚Äî —Ü–µ –∫–Ω–æ–ø–∫–∏, —è–∫—ñ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –∑–∞–º—ñ—Å—Ç—å –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
    kb = [
        [types.KeyboardButton(text="üóì –ú—ñ–π –¥–µ–Ω—å"), types.KeyboardButton(text="üìÖ –ú—ñ–π —Ç–∏–∂–¥–µ–Ω—å")],
        [types.KeyboardButton(text="üéØ –ü–ª–∞–Ω –Ω–∞ —Ä—ñ–∫"), types.KeyboardButton(text="üöÄ –ú–æ—Ç–∏–≤–∞—Ü—ñ—è")]
    ]
    # –ó–±–∏—Ä–∞—î–º–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É —Ç–∞ —Ä–æ–±–∏–º–æ —ó—ó –∑—Ä—É—á–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É (resize_keyboard=True)
    keyboard = types.ReplyKeyboardMarkup(keyboard=kb, resize_keyboard=True)
    
    # –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –≤—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–∞–∑–æ–º —ñ–∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–æ—é
    await message.answer("–ü—Ä–∏–≤—ñ—Ç! –Ø —Ç–≤—ñ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫. –©–æ –ø–æ–¥–∏–≤–∏–º–æ—Å—å —Å—å–æ–≥–æ–¥–Ω—ñ?", reply_markup=keyboard)

# –û–±—Ä–æ–±–Ω–∏–∫ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É (—è–∫—â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –∫–æ–º–∞–Ω–¥–∞)
@dp.message()
async def echo_message(message: types.Message):
    # –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–Ω—É–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É –∞–±–æ –ø—Ä–æ—Å—Ç–æ —â–æ—Å—å –Ω–∞–ø–∏—Å–∞–≤
    if message.text == "üöÄ –ú–æ—Ç–∏–≤–∞—Ü—ñ—è":
        await message.answer("–¢–∏ –∫—Ä—É—Ç–∏–π! –¢–∏ –≤–∂–µ –ø–æ—á–∞–≤ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–æ–≥–æ –±–æ—Ç–∞ ‚Äî —Ü–µ –≤–µ–ª–∏–∫–∏–π –∫—Ä–æ–∫! üí™")
    else:
        await message.answer(f"–¢–∏ –Ω–∞–ø–∏—Å–∞–≤: {message.text}. –ü–æ–∫–∏ —â–æ —è –≤—á—É—Å—è, –∞–ª–µ —Å–∫–æ—Ä–æ –±—É–¥—É –ø–ª–∞–Ω—É–≤–∞—Ç–∏ —Ü–µ!")

# –ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∑–∞–ø—É—Å–∫–∞—î –ø—Ä–æ—Ü–µ—Å "–ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è" —Å–µ—Ä–≤–µ—Ä—ñ–≤ Telegram
async def main():
    # –í–∏–¥–∞–ª—è—î–º–æ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—ñ –ø—Ä–∏–π—à–ª–∏, –ø–æ–∫–∏ –±–æ—Ç –±—É–≤ –≤–∏–º–∫–Ω–µ–Ω–∏–π (—â–æ–± –≤—ñ–Ω –Ω–µ —Å–ø–∞–º–∏–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É)
    await bot.delete_webhook(drop_pending_updates=True)
    # –ó–∞–ø—É—Å–∫–∞—î–º–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤
    await dp.start_polling(bot)

# –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É –≤ –ø—Ä–æ–≥—Ä–∞–º—É
if __name__ == "__main__":
    asyncio.run(main())
